<div class="container col-10 d-md-flex justify-content-md-between">
    <h4 style="font-weight: 300; letter-spacing: 1px;" class="text-black fw-bold mt-5">Me Connecter</h4>
    <app-fild-ariane [horizontal]="true"></app-fild-ariane>
</div>
<form (ngSubmit)="onSubmit()" novalidate
      class="text-black mt-4 px-4 px-md-5 py-4 mb-5 mx-3 mx-md-auto"
      style="
        max-width: 600px;
        margin: auto;
        backdrop-filter: blur(8px);
      ">
    <div class="text-center mb-4">
        <img src="assets/images/iconeMenusNav.svg" alt="Icône menus" height="55px" class="mb-2" style="filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.4));">
    </div>

    <div class="form-floating mt-3">
        <input type="email"
               class="form-control"
               id="email"
               [(ngModel)]="email"
               name="email"
               placeholder=" "
               required
               style="background: transparent;
                       border: none;
                       position: relative;
                       border-bottom: 1px solid black;
                       outline: none;">
        <label for="email" class="form-label text-black">Email :</label>
    </div>

    <div class="form-floating mt-4 mb-3">
        <input type="password"
               class="form-control text-black mt-2"
               id="password"
               [(ngModel)]="password"
               name="password"
               placeholder=" "
               required
               style="background: transparent;
                       border: none;
                       position: relative;
                       border-bottom: 1px solid black;
                       outline: none;">
        <label for="password" class="form-label text-black">Mot de passe :</label>
    </div>

    <div class="d-flex justify-content-between">
        <a (click)="MdpOublie()" class="btn">Mot de passe oublié ? </a>
        <a (click)="Inscription()" class="btn">Vous n'avez pas de compte ? </a>
    </div>


    <div class="d-flex justify-content-center">
        <button type="submit" class="btn px-4 py-2 mt-3 w-50 w-md-auto" id="co" 
        style="
                    color: white;
                    border-radius: 2px;
                    border: 1px solid black;
                    background: black;
                    transition: 0.25s ease;
                ">Me connecter</button>
    </div>
</form>

<div *ngIf="productPending" class="border rounded mx-auto d-flex" 
     style="max-width: 800px; height: 150px; overflow: hidden;">
  
  <!-- IMAGE À GAUCHE -->
  <img
    [src]="
      productPending?.image
        ? 'assets/images/' + productPending.image + '.jpg'
        : 'assets/images/boxe_default.jpg'
    "
    (error)="onImgError($event)"
    style="height: 100%; width: 150px; object-fit: cover; flex-shrink: 0;"
    alt="Produit"
  />

  <!-- CONTENU À DROITE -->
  <div class="flex-grow-1 text-black d-flex flex-column justify-content-between p-2">
    <!-- TITRE -->
    <h6 class="mb-1">Votre panier total :</h6>

    <!-- NOMBRE DE BOXES -->
    <div>
      <span>{{ productPending.quantity || 1 }} box{{ (productPending.quantity || 1) > 1 ? 'es' : '' }}</span>
    </div>

    <!-- SOUS-TOTAL ET FRAIS -->
    <div class="d-flex justify-content-between">
      <span>Sous-total :</span>
      <span class="me-3">{{ (productPending.price * productPending.quantity) }} €</span>
    </div>
    <div class="d-flex justify-content-between">
      <span>Frais de service :</span>
      <span class="me-3">2,50 €</span>
    </div>

    <!-- TOTAL -->
    <div class="d-flex justify-content-end mb-3">
      <span>Total à payer :</span>
      <span class="text-danger ms-1 fw-bold me-3">{{ (productPending.price * productPending.quantity + 2.5) }} €</span>
    </div>
  </div>
</div>





<div *ngIf="showErrorPopup"
     class="position-fixed top-50 start-50 translate-middle p-4 rounded shadow-lg text-dark"
     style="background: white; z-index: 9999; width: 90%; max-width: 400px;">

    <h5 class="text-center mb-3">⚠ Erreur</h5>
    <p class="text-center">{{ errorMessage }}</p>

    <div class="text-center mt-3">
        <button class="btn btn-danger px-4" (click)="showErrorPopup = false">Fermer</button>
    </div>
</div>
<!-- Succès -->
<div *ngIf="showSuccessPopup"
     class="position-fixed top-50 start-50 translate-middle p-4 rounded shadow-lg text-white"
     style="background: #28a745; z-index: 9999; width: 90%; max-width: 400px;">
    <h5 class="text-center mb-3">✅ Succès</h5>
    <p class="text-center">{{ successMessage }}</p>
    <div class="text-center mt-3">
        <button class="btn btn-light px-4" (click)="showSuccessPopup = false">Fermer</button>
    </div>
</div>